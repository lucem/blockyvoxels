<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Data transformation - Rendering - Blocky voxels and other fun things</title><meta name="description" content="Coming to the meat of how data flows through the various parts of the system to finally produce an image. These steps take place on&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://lucem.github.io/blockyvoxels/data-transformation-rendering.html"><link rel="alternate" type="application/atom+xml" href="https://lucem.github.io/blockyvoxels/feed.xml"><link rel="alternate" type="application/json" href="https://lucem.github.io/blockyvoxels/feed.json"><meta property="og:title" content="Data transformation - Rendering"><meta property="og:site_name" content="Blocky voxels and other fun things"><meta property="og:description" content="Coming to the meat of how data flows through the various parts of the system to finally produce an image. These steps take place on&hellip;"><meta property="og:url" content="https://lucem.github.io/blockyvoxels/data-transformation-rendering.html"><meta property="og:type" content="article"><link rel="preload" href="https://lucem.github.io/blockyvoxels/assets/dynamic/fonts/jetbrainsmono/jetbrainsmono.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://lucem.github.io/blockyvoxels/assets/css/style.css?v=9c0f93417398e01e3c99419944d45d0d"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://lucem.github.io/blockyvoxels/data-transformation-rendering.html"},"headline":"Data transformation - Rendering","datePublished":"2023-12-31T12:01","dateModified":"2023-12-31T13:10","description":"Coming to the meat of how data flows through the various parts of the system to finally produce an image. These steps take place on&hellip;","author":{"@type":"Person","name":"lucem","url":"https://lucem.github.io/blockyvoxels/authors/lucem/"},"publisher":{"@type":"Organization","name":"lucem"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body><div class="container"><header class="header"><div class="header__logo"><a class="logo" href="https://lucem.github.io/blockyvoxels/">Blocky voxels and other fun things</a></div><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://lucem.github.io/blockyvoxels/" target="_self">Front Page</a></li><li><a href="https://lucem.github.io/blockyvoxels/tags/" target="_self">Tag List</a></li><li class="has-submenu"><span class="is-separator" aria-haspopup="true">Filter by tag</span><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://lucem.github.io/blockyvoxels/tags/info-and-overview/" target="_self">#info and overview</a></li><li><a href="https://lucem.github.io/blockyvoxels/tags/ideas/" target="_self">#ideas</a></li><li><a href="https://lucem.github.io/blockyvoxels/tags/game/" target="_self">#game</a></li><li><a href="https://lucem.github.io/blockyvoxels/tags/engine/" target="_self">#engine</a></li><li class="has-submenu"><a href="https://lucem.github.io/blockyvoxels/tags/tools/" target="_self" aria-haspopup="true">#tools</a><ul class="navbar__submenu level-3" aria-hidden="true"><li><a href="https://lucem.github.io/blockyvoxels/tags/map-editor/" target="_self">#map editor</a></li><li><a href="https://lucem.github.io/blockyvoxels/tags/voxel-editor/" target="_self">#voxel editor</a></li><li><a href="https://lucem.github.io/blockyvoxels/tags/material-editor/" target="_self">#material editor</a></li></ul></li></ul></li></ul></nav></header><main class="content"><article class="post"><header><h1 class="post__title">Data transformation - Rendering</h1><div class="post__meta"><time datetime="2023-12-31T12:01" class="post__date">December 31, 2023 </time><span class="post__author"><a href="https://lucem.github.io/blockyvoxels/authors/lucem/" class="feed__author">lucem</a></span></div><div class="post__tags"><a href="https://lucem.github.io/blockyvoxels/tags/engine/" class="invert">engine</a> <a href="https://lucem.github.io/blockyvoxels/tags/ideas/" class="invert">ideas</a></div></header><div class="post__entry"><p>Coming to the meat of how data flows through the various parts of the system to finally produce an image.</p><h2>CPU</h2><p>These steps take place on the CPU and main memory side of the rendering process</p><h3>Chunk Data and Coordinates</h3><p>Raw Chunk Data consist of all voxels and their material properties per Chunk.<br>At this step, it is possible to determine<br>- which Chunks are close by (to trigger loading and unloading of Chunk data from and to disk)<br>- which Chunks are potentially visible (in camera view)</p><h3>Occlusion and visibility filtering</h3><p>For the potentially visible Chunks, we can filter for the outside hull, so to speak. We can entirely disregard any voxels that are occluded by other elements. This step consists essentially of two passes:<br>- determine which voxels are potentially visible<br>this will have to take transparent materials into account<br>- determine which faces of those voxels are potentially visible</p><p>This usually will remain largely the same over time, and only needs to be recalculated if voxels are added or destroyed.</p><p>Additional passes over this data allow for pre-calculation of lights, SSAO, determining distances between faces and the camera (pre-depth sorting) and other housekeeping.</p><h3>Sorting into rendering passes</h3><p>Transparent and opaque materials determine in which rendering pass faces are drawn, so they need to be sorted by this criterion. All materials need to be accounted for, if additional resources need to be uploaded or can be removed on the GPU, this is the time to do it.</p><h3>Preparing GPU buffer objects</h3><p>In this step, all the relevant data needed are assembled into object buffers to transfer over to the GPU. Considerable care needs to be taken here to limit bandwidth use to maintain high performance.</p><h2>GPU</h2><p>These steps form the processing and rendering pipeline on the GPU</p><h3>Vertex processing / triangle generation</h3><p>At this step, out of the information which faces to generate for which vertex, and which materials each face is made of, the actual geometry for rendering is constructed on the GPU.</p><h3>Deferred rendering and shading</h3><p>After generating the triangles to render, we run everything through a deferred rendering and shading pipeline.<br>This is done in two passes - opaque geometry first, then transparency after.</p><h3>Overlays</h3><p>Any overlays are drawn now - HUD / GUI and the like.</p><h3>Post-processing</h3><p>Finally, the rendered image is run through a post-processing chain (the extent of which depends on overall performance). </p><p> </p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on December 31, 2023</p><div class="post__share"></div></footer><nav class="pagination"><div class="pagination__title"><span>Read other posts</span></div><div class="pagination__buttons"><a href="https://lucem.github.io/blockyvoxels/space-partitioning-for-real.html" class="btn previous" rel="prev" aria-label="[MISSING TRANSLATION]:  Space partitioning (for real) "><span class="btn__icon">←</span> <span class="btn__text">Space partitioning (for real)</span> </a><a href="https://lucem.github.io/blockyvoxels/chunk-storage-and-compression-ideas-request-for-comment.html" class="btn next" rel="next" aria-label="[MISSING TRANSLATION]:  Chunk storage and compression (ideas - request for comment) "><span class="btn__text">Chunk storage and compression (ideas - request for comment)</span> <span class="btn__icon">→</span></a></div></nav></article></main><footer class="footer"><div class="footer__inner"><div class="footer__copyright"><p>Published initially on December 30th, 2023<br>Copyleft - lucem<br>Powered by Publii CMS</p></div></div></footer></div><script defer="defer" src="https://lucem.github.io/blockyvoxels/assets/js/scripts.min.js?v=74fad06980c30243d91d72c7c57fcdb8"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>